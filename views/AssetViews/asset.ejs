<!DOCTYPE html>
<html lang="en">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Nova+Square&display=swap" rel="stylesheet">
    <%-include('../partials/head.ejs')%>
    <%-include('../partials/inactive.ejs')%>
    <style>
    body{
    overflow: hidden;
    }
        .go-corner {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  width: 32px;
  height: 32px;
  overflow: hidden;
  top: 0;
  right: 0;
  background-color: #00838d;
  border-radius: 0 4px 0 32px;
  cursor: pointer;
}

.go-arrow {
  margin-top: -4px;
  margin-right: -4px;
  color: white;
  font-family: courier, sans;
}
        /* card 2 */
.card2 {
  display: block;
  top: 0px;
  position: relative;
  max-width: 262px;
  background-color: #f2f8f9;
  border-radius: 4px;
  padding: 32px 24px;
  margin: 12px;
  text-decoration: none;
  z-index: 0;
  overflow: hidden;
  border: 1px solid #f2f8f9;
  font-family: 'Dancing Script', cursive;
  font-family: 'Nova Square', sans-serif;
  height: fit-content;
    width: fit-content;

  &:hover {
    transition: all 0.2s ease-out;
    box-shadow: 0px 4px 8px rgba(38, 38, 38, 0.2);
    top: -4px;
    border: 1px solid #cccccc;
    background-color: white;
  }

  &:before {
    content: "";
    position: absolute;
    z-index: -1;
    top: -16px;
    right: -16px;
    background: #00838d;
    height: 32px;
    width: 32px;
    border-radius: 32px;
    transform: scale(2);
    transform-origin: 50% 50%;
    transition: transform 0.15s ease-out;
  }

  &:hover:before {
    transform: scale(2.15);
  }
}
    </style>
<body>
    <nav class="navbar bg-black">
        <div class="container-fluid">
            <span class="navbar-brand" onclick="history.back()" href="/" title="Back">
                <img 
                width="30"
                hegith="30"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEgklEQVR4nO2a/U/VVRzH31xEbjxEQmjYAobWUkdYIiYxYYg8c+/9HrqUhAaFbvaE60lnOVzTrRbFMCZjNkmvGV6433NjjY2W1WzrgVHNkq0VtkxXZmqaUwyBTzv0Zd01TO4ZP3zP5b628we8vp/z9P5+DhAkSJAgUw1RyPpWCsN0wOmmUI1TK+Pkzf6IZiCQcbpppqZTO+NEYmicXPX1ZEEgUtpFEYxT97isz2hGoOF0UxTjdGgC2fFKb0Og4HRTLOP0xbVkfcYzUB3NQwmM07eTkCWm0yjj9ChUhXVSisbp2KRk/53aw5pOTqiGndNiptMpf2R9pLdDJRw6ZTBOZ2Rkcxu+PAhAnQuJ5qFcjdNFv2V1Gl2+me8FsBpAJlTAoZNd4zTo9xTWR0bS6/a1GLI2ANEwO4zTGqbTVb9lPcNDd9U2vW7IlgCIgNnROD1pHCl+yTo6hwYXVr60w5AtABAOs6Nx2iSzOdk7rlycX/b0VkN2pfk3KqIQplOjjKyt/dIfibk1zxuyKwCEwuzxjum0R0a27O0LpxMy7Bt9dmNzJ6XCbgpnnDwysqWucyfjFq14zJBNBxACM1PVQ5GM0/sysiV7Tw/EJKetM2TTYHZK3qNZjNNnMrJFu0/0R8xJqTFkF8DsON10i6bTERnZgpZjfdbo+LUAHgQwD2bHzilZ0+kHGdm8nf2fWKyRVQAeAJAIs+P00kJNp5MysrkNfT0WS1glgAoACTA75V5KZzr9LiObveNwl7FeywHEw+yUc8phOv0plXi2dLkMWQ3ALJgdxqlMNvEsrXO1GrJ2JRLPFAmrkXh8CE2rbdro6PhrUGZK29svizuyUtwtpuW84sdfcBwc9H8d/yP+MhQiFECOkE7MrnrW9s6ls1LSnJpVaqFYANwnpOcsKX6qdP952b+PLpWaZSEAlgrpuDsyN5TsO3Nccnq/+3AbWaEQi4V0VOKi2uK2X6WumJpOH9q8pMYxZbBQSEfE31ZduPv4N5JrutehUxwUYr5IPGHRsWvzd33fK1npfpuX5kIhkkTysYRZH1rZeORjSekfHTqZPyb6ICpUAYulMueVzydqbk9m/GLnlAqFmA3gfrGuM7d2H5A8ss5qHroXChErrt5Cetkmz1syP+LHelBeyoNC3Ggko9VLntizS9NHhiXO6Sual0SUVIZI8V5FSKc+0tjg8Fwdkqi0+FDVUAgrgCIhfWdF/XbRM5Ko9CjTqQ4KMRPAKiGdUlr3ot096H+PWMGkNWM8aSXlr99sb798fjo8ebAAyBLSCem2urIDF36bDo9aQgBkjCWtBVkbSl3nfp7sOl72XMcbyvwPm4B7hHRMYuq6krZTA9cTXr6la79Sbzz+P2kl1RS9eeLotWSztn3Qacjmm785fn1uF0krPHZudWHrT1//Vzbn1d4eQ7ZYiWcPkyR5LF5G3LRmVfN3n47L5jUdPWy0ZMoA3IAA41aRtES8zH3tq0MFLQN9RrPNASAKAcrssaRlsVSGWaOrjP6T+VsyU5S0RGfxZkwTYoxqBwkC//gbNIgEXXRi6msAAAAASUVORK5CYII=">
               </span>
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown">
                        <a class="nav-link breadcrumb-item active" aria-current="page" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #fff !important;">
                          <h5>Asset Register</h5>
                        </a>
                    
                  </li>
            </ul>
         
            <div class="d-flex justify-content-between flex-wrap d-flex gap-3 align-items-center" style="color: rgb(163, 163, 91);">
          <img class="rounded shadow" width="30" height="30" src="
          <%if(user.image){%>
            <%= user.image %>
            <%}else{%>
                https://cdn.pixabay.com/photo/2019/08/11/18/59/icon-4399701_640.png
            <%}%>
          "  alt="display photo" srcset="">
          <h6 style="color: rgb(163, 163, 91);"><%=user.firstName.toUpperCase().charAt(0)%><%=user.firstName.substring(1,20)%> <%=user.lastName.toUpperCase().charAt(0)%><%=user.lastName.substring(1,20)%></h6>
                <input type="text" id="products" class="form-input rounded p-2" list="productsACD" name="referenceNo" placeholder="Search SKU with ACD-Code" />
                <datalist id="productsACD" >
                 <!-- display options for Bills -->
                 <%assets.forEach((asset)=>{%>
                       <option value="<%=asset._id%>"><%=asset.Name%></option>
                     <%})%>
                </datalist>
            </div>
        </div>
      </nav>
   
      
    <div class="">
      <%if(user.role ==="Admin" || user.jobTittle === 'Junior Accountant'  || user.jobTittle === 'Accountant' ){%>
        <div class="d-flex justify-content-between p-2 bg-success-subtle ">
            <a class="btn btn-dark m-1" href="/api/v1/asset/new_asset/<%=user._id%>">Register New Asset</a>
            <span onclick="location.assign('/api/v1/ExcelProduct')" title="Export <%=assets.length%> product in Xlsx List">
              <img height="40" width="40" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB90lEQVR4nGNgGAWjYBSMgiEJxCYEZ4hNCP4oNjHkP6lY81A96fhg3Uetg3Xp1PQAWY4n2wOHwPgD9TxApuMp9MD/UQ/AwGgMHBpNQsM0CXEXWhRwF1p84Smy+E8RLrH8L9TsMSAe+EKx42G42OI/T4MrBpZck0o2ZiAEqOZ4GB71QOpoDPwXLrP9f+f1o/8gULVpEjx5aLUE/v/x+9f/b79+/NdpDR7cSShiXhnYA2++vP8vUekEFlt5didYrGHr9KGRB3ZdPw52cOO2Gf8te2L///339//tVw/BMTQkPGDSGfn/15/f/99/+/T/2L0L///9+/ffa1r20CqFphxc8R8Glp/ZPvSK0YUnNsE9sOLsDoIeEHfXwsBC04LIxgyUeMBzahY42Zx6cPn/kbvnwZ7wn5k/NDwgXGb7/8aL+2BHg9K9/YQksGcevn32X6zCcfB7oHvPArDjd1w7ChfbdOkAWKx378LB7QGzrihw6QMqNq174+Dihh1h/3///QPGVr2xg9cDPBTgUQ9MG2kxwF1k/plqHigwHwAPFJrnUcUTBeb/hKL0v4m7a75Hx6oZDmRjBmoBCQ+t/+Ri9TR7sjHDqAegYDQG0kaT0EhPQu5aH+nvATvqTXBIemilSXhofaCfB+w+qKbYp1LNA6NgFIyCUcBADQAA6UC2Ipn+q/gAAAAASUVORK5CYII=">
            </span>
          </div>
          <%}%>
        <div class=" overflow-y-scroll flex-wrap d-flex gap-2" style="overflow-y:scroll !important; height:73vh !important;">
        <%if(assets.length > 0){%>
            <% assets.forEach((asset)=> { %>
                <div class="card2 m-1 mb-3 shadow-sm" style="width:13rem;" title="<%=asset.Name%>" >
                    
                        <div class="card-img-top justify-content-center d-flex p-2">
                            <img src="<%if(asset.Image){%>
                                <%= asset.Image %>
                                <%}else{%>
                                    /illustration.jpeg
                                <%}%>
                                " alt="<%= asset.Name %> Photo"  width=100 height="100" loading="lazy">  
                        </div>
                    
                    <div class="card-body" style="overflow:hidden;
                    white-space:nowrap;
                    text-overflow:ellipsis;
                    max-width:150px;">
                        <h6 class="card-title"><%= asset.Name.toUpperCase() %></h6>
                        <small class="card-text"> CODE: <%=asset.AssetCode%></small>
                    </div>
                    <span onclick="location.assign('/api/v1/SingleAsset/<%=asset._id%>/<%=asset.Name %>/<%=user._id%>')" class=" go-corner"> 
                        <div class="go-arrow">
                            â†’
                        </div>
                    </span>
            </div>
            <% }) %>
            <%}else{%>
            <h6>Nothing to Show</h6>
            <%}%>
    </div>
</div>
<%-include('../partials/footer.ejs')%>
 <!-- The Modal -->
 <div id="myModal" class="modal flex items-center flex-col justify-center gap-3 shadow">
    <!-- Modal content -->
    <div class=" modal-content container" style=" background-color: transparent !important; border: none !important;">
        <div class="spinner-border text-info" role="status" style="width: 3rem; height: 3rem;">
            <span class="visually-hidden"></span>
     </div>
 </div>
</body>
<script>
    const products = document.getElementById("products")
    products.addEventListener('change',async(event)=>{
    document.getElementById('myModal').style.display = 'block';
        setTimeout(()=>{
            document.getElementById('myModal').style.display = 'none';
        },3000)
        location.assign(`/api/v1/Product/${event.target.value}/`)
    })
</script>
</html>